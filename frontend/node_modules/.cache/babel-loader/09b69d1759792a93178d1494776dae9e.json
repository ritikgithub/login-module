{"ast":null,"code":"import _regeneratorRuntime from\"/home/ritik.agarwal/Desktop/GL/login_module/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ritik.agarwal/Desktop/GL/login_module/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/ritik.agarwal/Desktop/GL/login_module/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonButton,IonContent,IonHeader,IonInput,IonItem,IonLabel,IonPage,IonTitle,IonToast,IonToolbar}from'@ionic/react';import React,{useRef,useState}from'react';import{Camera,CameraResultType}from'@capacitor/camera';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Profile=function Profile(_ref){var user=_ref.user,setuser=_ref.setuser;var _useState=useState(),_useState2=_slicedToArray(_useState,2),imgFile=_useState2[0],setimgFile=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showToast=_useState4[0],setshowToast=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),toastMessage=_useState6[0],settoastmessage=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),toastType=_useState8[0],settoastType=_useState8[1];var inputref=useRef();function camerahandler(){return _camerahandler.apply(this,arguments);}function _camerahandler(){_camerahandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var photo;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Camera.getPhoto({resultType:CameraResultType.Uri});case 2:photo=_context.sent;console.log(photo);case 4:case\"end\":return _context.stop();}}},_callee);}));return _camerahandler.apply(this,arguments);}function updateHandler(){var formData=new FormData();if(!inputref.current.value){settoastType(\"danger\");settoastmessage(\"All fields are mandatory\");setshowToast(true);return;}formData.append('imgFile',imgFile);formData.append('name',inputref.current.value);formData.append('userId',user._id);var resStatus=0;fetch(\"http://192.168.43.228:5000/updateProfile\",{method:'POST',body:formData}).then(function(res){resStatus=res.status;return res.json();}).then(function(res){if(resStatus==200){setuser(res.user);settoastType(\"success\");settoastmessage(res.message);setshowToast(true);}else{settoastType(\"danger\");settoastmessage(res.error);setshowToast(true);}});}return/*#__PURE__*/_jsxs(IonPage,{children:[/*#__PURE__*/_jsx(IonHeader,{children:/*#__PURE__*/_jsx(IonToolbar,{children:/*#__PURE__*/_jsx(IonTitle,{children:\"Profile\"})})}),/*#__PURE__*/_jsxs(IonContent,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-3\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"http://192.168.43.228:5000/\".concat(user.avatar),alt:\"\",style:{height:\"200px\",width:\"200px\",borderRadius:\"50%\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"h4 mt-3 text-primary\",children:user.name})]}),/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"stacked\",children:\"Update Name\"}),/*#__PURE__*/_jsx(IonInput,{ref:inputref,value:user.name})]}),/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"stacked\",children:\"Upload Image\"}),/*#__PURE__*/_jsx(IonButton,{onClick:camerahandler,children:\"Take Picture\"})]}),/*#__PURE__*/_jsx(IonButton,{size:\"default\",expand:\"block\",onClick:updateHandler,color:\"primary\",children:\"Update\"}),/*#__PURE__*/_jsx(IonToast,{isOpen:showToast,onDidDismiss:function onDidDismiss(){return setshowToast(false);},message:toastMessage,duration:2000,color:toastType})]})]});};export default Profile;","map":{"version":3,"sources":["/home/ritik.agarwal/Desktop/GL/login_module/frontend/src/pages/Profile.tsx"],"names":["IonButton","IonContent","IonHeader","IonInput","IonItem","IonLabel","IonPage","IonTitle","IonToast","IonToolbar","React","useRef","useState","Camera","CameraResultType","Profile","user","setuser","imgFile","setimgFile","showToast","setshowToast","toastMessage","settoastmessage","toastType","settoastType","inputref","camerahandler","getPhoto","resultType","Uri","photo","console","log","updateHandler","formData","FormData","current","value","append","_id","resStatus","fetch","method","body","then","res","status","json","message","error","avatar","height","width","borderRadius","name"],"mappings":"8fAAA,OAASA,SAAT,CAAoBC,UAApB,CAAgCC,SAAhC,CAA2CC,QAA3C,CAAqDC,OAArD,CAA8DC,QAA9D,CAAwEC,OAAxE,CAAiFC,QAAjF,CAA2FC,QAA3F,CAAqGC,UAArG,KAAuH,cAAvH,CACA,MAAOC,CAAAA,KAAP,EAA2BC,MAA3B,CAAmCC,QAAnC,KAAmD,OAAnD,CACA,OAASC,MAAT,CAAiBC,gBAAjB,KAAyC,mBAAzC,C,wFAGA,GAAMC,CAAAA,OAAsB,CAAG,QAAzBA,CAAAA,OAAyB,MAAuB,IAApBC,CAAAA,IAAoB,MAApBA,IAAoB,CAAdC,OAAc,MAAdA,OAAc,CAClD,cAA8BL,QAAQ,EAAtC,wCAAOM,OAAP,eAAgBC,UAAhB,eACA,eAAkCP,QAAQ,CAAC,KAAD,CAA1C,yCAAOQ,SAAP,eAAkBC,YAAlB,eACA,eAAwCT,QAAQ,CAAC,EAAD,CAAhD,yCAAOU,YAAP,eAAqBC,eAArB,eACA,eAAkCX,QAAQ,CAAC,EAAD,CAA1C,yCAAOY,SAAP,eAAkBC,YAAlB,eACA,GAAIC,CAAAA,QAAQ,CAAGf,MAAM,EAArB,CALkD,QAOnCgB,CAAAA,aAPmC,iJAOlD,mKACqBd,CAAAA,MAAM,CAACe,QAAP,CAAgB,CAC5BC,UAAU,CAAEf,gBAAgB,CAACgB,GADD,CAAhB,CADrB,QACOC,KADP,eAIIC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EAJJ,sDAPkD,gDAclD,QAASG,CAAAA,aAAT,EAAyB,CACrB,GAAIC,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAf,CACA,GAAG,CAACV,QAAQ,CAACW,OAAT,CAAiBC,KAArB,CAA4B,CACxBb,YAAY,CAAC,QAAD,CAAZ,CACAF,eAAe,CAAC,0BAAD,CAAf,CACAF,YAAY,CAAC,IAAD,CAAZ,CACA,OACH,CACDc,QAAQ,CAACI,MAAT,CAAgB,SAAhB,CAA2BrB,OAA3B,EACAiB,QAAQ,CAACI,MAAT,CAAgB,MAAhB,CAAuBb,QAAQ,CAACW,OAAT,CAAiBC,KAAxC,EACAH,QAAQ,CAACI,MAAT,CAAgB,QAAhB,CAA0BvB,IAAI,CAACwB,GAA/B,EACA,GAAIC,CAAAA,SAAS,CAAG,CAAhB,CACAC,KAAK,CAAC,0CAAD,CAA6C,CAC9CC,MAAM,CAAE,MADsC,CAG9CC,IAAI,CAAET,QAHwC,CAA7C,CAAL,CAIGU,IAJH,CAIQ,SAAAC,GAAG,CAAI,CAAEL,SAAS,CAAGK,GAAG,CAACC,MAAhB,CAAwB,MAAOD,CAAAA,GAAG,CAACE,IAAJ,EAAP,CAAmB,CAJ5D,EAKKH,IALL,CAKU,SAAAC,GAAG,CAAI,CACT,GAAIL,SAAS,EAAI,GAAjB,CAAsB,CAClBxB,OAAO,CAAC6B,GAAG,CAAC9B,IAAL,CAAP,CACAS,YAAY,CAAC,SAAD,CAAZ,CACAF,eAAe,CAACuB,GAAG,CAACG,OAAL,CAAf,CACA5B,YAAY,CAAC,IAAD,CAAZ,CACH,CALD,IAMK,CACDI,YAAY,CAAC,QAAD,CAAZ,CACAF,eAAe,CAACuB,GAAG,CAACI,KAAL,CAAf,CACA7B,YAAY,CAAC,IAAD,CAAZ,CACH,CACJ,CAjBL,EAkBH,CACD,mBACI,MAAC,OAAD,yBACI,KAAC,SAAD,wBACI,KAAC,UAAD,wBACI,KAAC,QAAD,sBADJ,EADJ,EADJ,cAMI,MAAC,UAAD,yBACI,aAAK,SAAS,CAAC,kBAAf,wBACA,YAAK,GAAG,sCAAgCL,IAAI,CAACmC,MAArC,CAAR,CAAuD,GAAG,CAAC,EAA3D,CAA+D,KAAK,CAAE,CAACC,MAAM,CAAE,OAAT,CAAmBC,KAAK,CAAE,OAA1B,CAAmCC,YAAY,CAAC,KAAhD,CAAtE,EADA,cAEA,YAAK,SAAS,CAAC,sBAAf,UAAuCtC,IAAI,CAACuC,IAA5C,EAFA,GADJ,cAMI,MAAC,OAAD,yBACI,KAAC,QAAD,EAAU,QAAQ,CAAC,SAAnB,yBADJ,cAEI,KAAC,QAAD,EAAU,GAAG,CAAE7B,QAAf,CAAyB,KAAK,CAAEV,IAAI,CAACuC,IAArC,EAFJ,GANJ,cAUI,MAAC,OAAD,yBACI,KAAC,QAAD,EAAU,QAAQ,CAAC,SAAnB,0BADJ,cAEI,KAAC,SAAD,EAAW,OAAO,CAAE5B,aAApB,0BAFJ,GAVJ,cAeI,KAAC,SAAD,EAAW,IAAI,CAAC,SAAhB,CAA0B,MAAM,CAAC,OAAjC,CAAyC,OAAO,CAAEO,aAAlD,CAAiE,KAAK,CAAC,SAAvE,oBAfJ,cAgBI,KAAC,QAAD,EACI,MAAM,CAAEd,SADZ,CAEI,YAAY,CAAE,8BAAMC,CAAAA,YAAY,CAAC,KAAD,CAAlB,EAFlB,CAGI,OAAO,CAAEC,YAHb,CAII,QAAQ,CAAE,IAJd,CAKI,KAAK,CAAEE,SALX,EAhBJ,GANJ,GADJ,CAiCH,CA9ED,CAgFA,cAAeT,CAAAA,OAAf","sourcesContent":["import { IonButton, IonContent, IonHeader, IonInput, IonItem, IonLabel, IonPage, IonTitle, IonToast, IonToolbar } from '@ionic/react'\nimport React, { useEffect, useRef, useState } from 'react'\nimport { Camera, CameraResultType } from '@capacitor/camera';\n\n\nconst Profile: React.FC<any> = ({ user, setuser }) => {\n    const [imgFile, setimgFile] = useState<Blob>()\n    const [showToast, setshowToast] = useState(false);\n    const [toastMessage, settoastmessage] = useState(\"\");\n    const [toastType, settoastType] = useState(\"\");\n    let inputref = useRef<any>();\n\n    async function camerahandler() {\n       let photo = await Camera.getPhoto({\n             resultType: CameraResultType.Uri\n        });\n        console.log(photo);\n    }\n\n    function updateHandler() {\n        let formData = new FormData();\n        if(!inputref.current.value) {\n            settoastType(\"danger\");\n            settoastmessage(\"All fields are mandatory\");\n            setshowToast(true);\n            return;\n        }\n        formData.append('imgFile', imgFile);\n        formData.append('name',inputref.current.value);\n        formData.append('userId', user._id);\n        let resStatus = 0;\n        fetch(\"http://192.168.43.228:5000/updateProfile\", {\n            method: 'POST',\n           \n            body: formData\n        }).then(res => { resStatus = res.status; return res.json() })\n            .then(res => {\n                if (resStatus == 200) {\n                    setuser(res.user);\n                    settoastType(\"success\");\n                    settoastmessage(res.message);\n                    setshowToast(true);\n                }\n                else {\n                    settoastType(\"danger\");\n                    settoastmessage(res.error);\n                    setshowToast(true);\n                }\n            });\n    }\n    return (\n        <IonPage>\n            <IonHeader>\n                <IonToolbar>\n                    <IonTitle>Profile</IonTitle>\n                </IonToolbar>\n            </IonHeader>\n            <IonContent>\n                <div className=\"text-center mt-3\">\n                <img src={`http://192.168.43.228:5000/${user.avatar}`} alt=\"\"  style={{height: \"200px\" , width: \"200px\", borderRadius:\"50%\"}}></img>\n                <div className=\"h4 mt-3 text-primary\">{user.name}</div>\n                </div>\n                \n                <IonItem>\n                    <IonLabel position=\"stacked\">Update Name</IonLabel>\n                    <IonInput ref={inputref} value={user.name}></IonInput>\n                </IonItem>\n                <IonItem>\n                    <IonLabel position=\"stacked\">Upload Image</IonLabel>\n                    <IonButton onClick={camerahandler}>Take Picture</IonButton>\n                    {/* <input className=\"my-3\" type=\"file\" onChange={(e) => setimgFile(e.target.files[0])} /> */}\n                </IonItem>\n                <IonButton size=\"default\" expand=\"block\" onClick={updateHandler} color=\"primary\">Update</IonButton>\n                <IonToast\n                    isOpen={showToast}\n                    onDidDismiss={() => setshowToast(false)}\n                    message={toastMessage}\n                    duration={2000}\n                    color={toastType}\n                />\n            </IonContent>\n        </IonPage>\n    )\n}\n\nexport default Profile\n"]},"metadata":{},"sourceType":"module"}