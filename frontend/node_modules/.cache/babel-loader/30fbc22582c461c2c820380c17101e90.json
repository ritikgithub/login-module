{"ast":null,"code":"import _regeneratorRuntime from \"/home/ritik.agarwal/Desktop/GL/login_module/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/ritik.agarwal/Desktop/GL/login_module/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/ritik.agarwal/Desktop/GL/login_module/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/ritik.agarwal/Desktop/GL/login_module/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/ritik.agarwal/Desktop/GL/login_module/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/ritik.agarwal/Desktop/GL/login_module/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { WebPlugin, CapacitorException } from '@capacitor/core';\nimport { CameraSource, CameraDirection } from './definitions';\nexport var CameraWeb = /*#__PURE__*/function (_WebPlugin) {\n  _inherits(CameraWeb, _WebPlugin);\n\n  var _super = _createSuper(CameraWeb);\n\n  function CameraWeb() {\n    _classCallCheck(this, CameraWeb);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(CameraWeb, [{\n    key: \"getPhoto\",\n    value: function () {\n      var _getPhoto = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(options) {\n        var _this = this;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n                  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(resolve, reject) {\n                    var cameraModal;\n                    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            if (!options.webUseInput) {\n                              _context2.next = 4;\n                              break;\n                            }\n\n                            _this.fileInputExperience(options, resolve);\n\n                            _context2.next = 21;\n                            break;\n\n                          case 4:\n                            if (!customElements.get('pwa-camera-modal')) {\n                              _context2.next = 19;\n                              break;\n                            }\n\n                            cameraModal = document.createElement('pwa-camera-modal');\n                            document.body.appendChild(cameraModal);\n                            _context2.prev = 7;\n                            _context2.next = 10;\n                            return cameraModal.componentOnReady();\n\n                          case 10:\n                            cameraModal.addEventListener('onPhoto', /*#__PURE__*/function () {\n                              var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n                                var photo;\n                                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                                  while (1) {\n                                    switch (_context.prev = _context.next) {\n                                      case 0:\n                                        photo = e.detail;\n\n                                        if (!(photo === null)) {\n                                          _context.next = 5;\n                                          break;\n                                        }\n\n                                        reject(new CapacitorException('User cancelled photos app'));\n                                        _context.next = 14;\n                                        break;\n\n                                      case 5:\n                                        if (!(photo instanceof Error)) {\n                                          _context.next = 9;\n                                          break;\n                                        }\n\n                                        reject(photo);\n                                        _context.next = 14;\n                                        break;\n\n                                      case 9:\n                                        _context.t0 = resolve;\n                                        _context.next = 12;\n                                        return _this._getCameraPhoto(photo, options);\n\n                                      case 12:\n                                        _context.t1 = _context.sent;\n                                        (0, _context.t0)(_context.t1);\n\n                                      case 14:\n                                        cameraModal.dismiss();\n                                        document.body.removeChild(cameraModal);\n\n                                      case 16:\n                                      case \"end\":\n                                        return _context.stop();\n                                    }\n                                  }\n                                }, _callee);\n                              }));\n\n                              return function (_x4) {\n                                return _ref2.apply(this, arguments);\n                              };\n                            }());\n                            cameraModal.present();\n                            _context2.next = 17;\n                            break;\n\n                          case 14:\n                            _context2.prev = 14;\n                            _context2.t0 = _context2[\"catch\"](7);\n\n                            _this.fileInputExperience(options, resolve);\n\n                          case 17:\n                            _context2.next = 21;\n                            break;\n\n                          case 19:\n                            console.error(\"Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/pwa-elements.\");\n\n                            _this.fileInputExperience(options, resolve);\n\n                          case 21:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2, null, [[7, 14]]);\n                  }));\n\n                  return function (_x2, _x3) {\n                    return _ref.apply(this, arguments);\n                  };\n                }()));\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function getPhoto(_x) {\n        return _getPhoto.apply(this, arguments);\n      }\n\n      return getPhoto;\n    }()\n  }, {\n    key: \"fileInputExperience\",\n    value: function fileInputExperience(options, resolve) {\n      var input = document.querySelector('#_capacitor-camera-input');\n\n      var cleanup = function cleanup() {\n        var _a;\n\n        (_a = input.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n      };\n\n      if (!input) {\n        input = document.createElement('input');\n        input.id = '_capacitor-camera-input';\n        input.type = 'file';\n        document.body.appendChild(input);\n      }\n\n      input.accept = 'image/*';\n      input.capture = true;\n\n      if (options.source === CameraSource.Photos || options.source === CameraSource.Prompt) {\n        input.removeAttribute('capture');\n      } else if (options.direction === CameraDirection.Front) {\n        input.capture = 'user';\n      } else if (options.direction === CameraDirection.Rear) {\n        input.capture = 'environment';\n      }\n\n      input.addEventListener('change', function (_e) {\n        var file = input.files[0];\n        var format = 'jpeg';\n\n        if (file.type === 'image/png') {\n          format = 'png';\n        } else if (file.type === 'image/gif') {\n          format = 'gif';\n        }\n\n        if (options.resultType === 'dataUrl' || options.resultType === 'base64') {\n          var reader = new FileReader();\n          reader.addEventListener('load', function () {\n            if (options.resultType === 'dataUrl') {\n              resolve({\n                dataUrl: reader.result,\n                format: format\n              });\n            } else if (options.resultType === 'base64') {\n              var b64 = reader.result.split(',')[1];\n              resolve({\n                base64String: b64,\n                format: format\n              });\n            }\n\n            cleanup();\n          });\n          reader.readAsDataURL(file);\n        } else {\n          resolve({\n            webPath: URL.createObjectURL(file),\n            format: format\n          });\n          cleanup();\n        }\n      });\n      input.click();\n    }\n  }, {\n    key: \"_getCameraPhoto\",\n    value: function _getCameraPhoto(photo, options) {\n      return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n        var format = photo.type.split('/')[1];\n\n        if (options.resultType === 'uri') {\n          resolve({\n            webPath: URL.createObjectURL(photo),\n            format: format\n          });\n        } else {\n          reader.readAsDataURL(photo);\n\n          reader.onloadend = function () {\n            var r = reader.result;\n\n            if (options.resultType === 'dataUrl') {\n              resolve({\n                dataUrl: r,\n                format: format\n              });\n            } else {\n              resolve({\n                base64String: r.split(',')[1],\n                format: format\n              });\n            }\n          };\n\n          reader.onerror = function (e) {\n            reject(e);\n          };\n        }\n      });\n    }\n  }, {\n    key: \"checkPermissions\",\n    value: function () {\n      var _checkPermissions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var permission;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!(typeof navigator === 'undefined' || !navigator.permissions)) {\n                  _context4.next = 2;\n                  break;\n                }\n\n                throw this.unavailable('Permissions API not available in this browser');\n\n              case 2:\n                _context4.prev = 2;\n                _context4.next = 5;\n                return window.navigator.permissions.query({\n                  name: 'camera'\n                });\n\n              case 5:\n                permission = _context4.sent;\n                return _context4.abrupt(\"return\", {\n                  camera: permission.state,\n                  photos: 'granted'\n                });\n\n              case 9:\n                _context4.prev = 9;\n                _context4.t0 = _context4[\"catch\"](2);\n                throw this.unavailable('Camera permissions are not available in this browser');\n\n              case 12:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[2, 9]]);\n      }));\n\n      function checkPermissions() {\n        return _checkPermissions.apply(this, arguments);\n      }\n\n      return checkPermissions;\n    }()\n  }, {\n    key: \"requestPermissions\",\n    value: function () {\n      var _requestPermissions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                throw this.unimplemented('Not implemented on web.');\n\n              case 1:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function requestPermissions() {\n        return _requestPermissions.apply(this, arguments);\n      }\n\n      return requestPermissions;\n    }()\n  }]);\n\n  return CameraWeb;\n}(WebPlugin);\nvar Camera = new CameraWeb();\nexport { Camera };","map":{"version":3,"sources":["../../src/web.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { WebPlugin, CapacitorException } from '@capacitor/core';\nimport { CameraSource, CameraDirection } from './definitions';\nexport class CameraWeb extends WebPlugin {\n    async getPhoto(options) {\n        // eslint-disable-next-line no-async-promise-executor\n        return new Promise(async (resolve, reject) => {\n            if (options.webUseInput) {\n                this.fileInputExperience(options, resolve);\n            }\n            else {\n                if (customElements.get('pwa-camera-modal')) {\n                    const cameraModal = document.createElement('pwa-camera-modal');\n                    document.body.appendChild(cameraModal);\n                    try {\n                        await cameraModal.componentOnReady();\n                        cameraModal.addEventListener('onPhoto', async (e) => {\n                            const photo = e.detail;\n                            if (photo === null) {\n                                reject(new CapacitorException('User cancelled photos app'));\n                            }\n                            else if (photo instanceof Error) {\n                                reject(photo);\n                            }\n                            else {\n                                resolve(await this._getCameraPhoto(photo, options));\n                            }\n                            cameraModal.dismiss();\n                            document.body.removeChild(cameraModal);\n                        });\n                        cameraModal.present();\n                    }\n                    catch (e) {\n                        this.fileInputExperience(options, resolve);\n                    }\n                }\n                else {\n                    console.error(`Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/pwa-elements.`);\n                    this.fileInputExperience(options, resolve);\n                }\n            }\n        });\n    }\n    fileInputExperience(options, resolve) {\n        let input = document.querySelector('#_capacitor-camera-input');\n        const cleanup = () => {\n            var _a;\n            (_a = input.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n        };\n        if (!input) {\n            input = document.createElement('input');\n            input.id = '_capacitor-camera-input';\n            input.type = 'file';\n            document.body.appendChild(input);\n        }\n        input.accept = 'image/*';\n        input.capture = true;\n        if (options.source === CameraSource.Photos ||\n            options.source === CameraSource.Prompt) {\n            input.removeAttribute('capture');\n        }\n        else if (options.direction === CameraDirection.Front) {\n            input.capture = 'user';\n        }\n        else if (options.direction === CameraDirection.Rear) {\n            input.capture = 'environment';\n        }\n        input.addEventListener('change', (_e) => {\n            const file = input.files[0];\n            let format = 'jpeg';\n            if (file.type === 'image/png') {\n                format = 'png';\n            }\n            else if (file.type === 'image/gif') {\n                format = 'gif';\n            }\n            if (options.resultType === 'dataUrl' || options.resultType === 'base64') {\n                const reader = new FileReader();\n                reader.addEventListener('load', () => {\n                    if (options.resultType === 'dataUrl') {\n                        resolve({\n                            dataUrl: reader.result,\n                            format,\n                        });\n                    }\n                    else if (options.resultType === 'base64') {\n                        const b64 = reader.result.split(',')[1];\n                        resolve({\n                            base64String: b64,\n                            format,\n                        });\n                    }\n                    cleanup();\n                });\n                reader.readAsDataURL(file);\n            }\n            else {\n                resolve({\n                    webPath: URL.createObjectURL(file),\n                    format: format,\n                });\n                cleanup();\n            }\n        });\n        input.click();\n    }\n    _getCameraPhoto(photo, options) {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            const format = photo.type.split('/')[1];\n            if (options.resultType === 'uri') {\n                resolve({\n                    webPath: URL.createObjectURL(photo),\n                    format: format,\n                });\n            }\n            else {\n                reader.readAsDataURL(photo);\n                reader.onloadend = () => {\n                    const r = reader.result;\n                    if (options.resultType === 'dataUrl') {\n                        resolve({\n                            dataUrl: r,\n                            format: format,\n                        });\n                    }\n                    else {\n                        resolve({\n                            base64String: r.split(',')[1],\n                            format: format,\n                        });\n                    }\n                };\n                reader.onerror = e => {\n                    reject(e);\n                };\n            }\n        });\n    }\n    async checkPermissions() {\n        if (typeof navigator === 'undefined' || !navigator.permissions) {\n            throw this.unavailable('Permissions API not available in this browser');\n        }\n        try {\n            // https://developer.mozilla.org/en-US/docs/Web/API/Permissions/query\n            // the specific permissions that are supported varies among browsers that implement the\n            // permissions API, so we need a try/catch in case 'camera' is invalid\n            const permission = await window.navigator.permissions.query({\n                name: 'camera',\n            });\n            return {\n                camera: permission.state,\n                photos: 'granted',\n            };\n        }\n        catch (_a) {\n            throw this.unavailable('Camera permissions are not available in this browser');\n        }\n    }\n    async requestPermissions() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n}\nconst Camera = new CameraWeb();\nexport { Camera };\n//# sourceMappingURL=web.js.map"]},"metadata":{},"sourceType":"module"}