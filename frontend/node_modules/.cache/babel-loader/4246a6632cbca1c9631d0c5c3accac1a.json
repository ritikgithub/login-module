{"ast":null,"code":"import _slicedToArray from\"/home/ritik.agarwal/Desktop/GL/login_module/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonButton,IonContent,IonHeader,IonInput,IonItem,IonLabel,IonPage,IonTitle,IonToast,IonToolbar}from'@ionic/react';import React,{useRef,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Profile=function Profile(_ref){var user=_ref.user,setuser=_ref.setuser;var _useState=useState(),_useState2=_slicedToArray(_useState,2),imgFile=_useState2[0],setimgFile=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showToast=_useState4[0],setshowToast=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),toastMessage=_useState6[0],settoastmessage=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),toastType=_useState8[0],settoastType=_useState8[1];var inputref=useRef();function updateHandler(){var formData=new FormData();if(!inputref.current.value){settoastType(\"danger\");settoastmessage(\"All fields are mandatory\");setshowToast(true);return;}formData.append('imgFile',imgFile);formData.append('name',inputref.current.value);formData.append('userId',user._id);var resStatus=0;fetch(\"http://192.168.43.228:5000/updateProfile\",{method:'POST',body:formData}).then(function(res){resStatus=res.status;return res.json();}).then(function(res){if(resStatus==200){setuser(res.user);settoastType(\"success\");settoastmessage(res.message);setshowToast(true);}else{settoastType(\"danger\");settoastmessage(res.error);setshowToast(true);}});}return/*#__PURE__*/_jsxs(IonPage,{children:[/*#__PURE__*/_jsx(IonHeader,{children:/*#__PURE__*/_jsx(IonToolbar,{children:/*#__PURE__*/_jsx(IonTitle,{children:\"Profile\"})})}),/*#__PURE__*/_jsxs(IonContent,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-3\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"http://192.168.43.228:5000/\".concat(user.avatar),alt:\"\",style:{height:\"200px\",width:\"200px\",borderRadius:\"50%\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"h4 mt-3 text-primary\",children:user.name})]}),/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"stacked\",children:\"Update Name\"}),/*#__PURE__*/_jsx(IonInput,{ref:inputref,value:user.name})]}),/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"stacked\",children:\"Upload Image\"}),/*#__PURE__*/_jsx(\"input\",{className:\"my-3\",type:\"file\",onChange:function onChange(e){return setimgFile(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(IonButton,{size:\"default\",expand:\"block\",onClick:updateHandler,color:\"primary\",children:\"Update\"}),/*#__PURE__*/_jsx(IonToast,{isOpen:showToast,onDidDismiss:function onDidDismiss(){return setshowToast(false);},message:toastMessage,duration:2000,color:toastType})]})]});};export default Profile;","map":{"version":3,"sources":["/home/ritik.agarwal/Desktop/GL/login_module/frontend/src/pages/Profile.tsx"],"names":["IonButton","IonContent","IonHeader","IonInput","IonItem","IonLabel","IonPage","IonTitle","IonToast","IonToolbar","React","useRef","useState","Profile","user","setuser","imgFile","setimgFile","showToast","setshowToast","toastMessage","settoastmessage","toastType","settoastType","inputref","updateHandler","formData","FormData","current","value","append","_id","resStatus","fetch","method","body","then","res","status","json","message","error","avatar","height","width","borderRadius","name","e","target","files"],"mappings":"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","sourcesContent":["import { IonButton, IonContent, IonHeader, IonInput, IonItem, IonLabel, IonPage, IonTitle, IonToast, IonToolbar } from '@ionic/react'\nimport React, { useEffect, useRef, useState } from 'react'\n\nconst Profile: React.FC<any> = ({ user, setuser }) => {\n    const [imgFile, setimgFile] = useState<Blob>()\n    const [showToast, setshowToast] = useState(false);\n    const [toastMessage, settoastmessage] = useState(\"\");\n    const [toastType, settoastType] = useState(\"\");\n    let inputref = useRef<any>();\n\n    function updateHandler() {\n        let formData = new FormData();\n        if(!inputref.current.value) {\n            settoastType(\"danger\");\n            settoastmessage(\"All fields are mandatory\");\n            setshowToast(true);\n            return;\n        }\n        formData.append('imgFile', imgFile);\n        formData.append('name',inputref.current.value);\n        formData.append('userId', user._id);\n        let resStatus = 0;\n        fetch(\"http://192.168.43.228:5000/updateProfile\", {\n            method: 'POST',\n           \n            body: formData\n        }).then(res => { resStatus = res.status; return res.json() })\n            .then(res => {\n                if (resStatus == 200) {\n                    setuser(res.user);\n                    settoastType(\"success\");\n                    settoastmessage(res.message);\n                    setshowToast(true);\n                }\n                else {\n                    settoastType(\"danger\");\n                    settoastmessage(res.error);\n                    setshowToast(true);\n                }\n            });\n    }\n    return (\n        <IonPage>\n            <IonHeader>\n                <IonToolbar>\n                    <IonTitle>Profile</IonTitle>\n                </IonToolbar>\n            </IonHeader>\n            <IonContent>\n                <div className=\"text-center mt-3\">\n                <img src={`http://192.168.43.228:5000/${user.avatar}`} alt=\"\"  style={{height: \"200px\" , width: \"200px\", borderRadius:\"50%\"}}></img>\n                <div className=\"h4 mt-3 text-primary\">{user.name}</div>\n                </div>\n                \n                <IonItem>\n                    <IonLabel position=\"stacked\">Update Name</IonLabel>\n                    <IonInput ref={inputref} value={user.name}></IonInput>\n                </IonItem>\n                <IonItem>\n                    <IonLabel position=\"stacked\">Upload Image</IonLabel>\n                    <input className=\"my-3\" type=\"file\" onChange={(e) => setimgFile(e.target.files[0])} />\n                </IonItem>\n                <IonButton size=\"default\" expand=\"block\" onClick={updateHandler} color=\"primary\">Update</IonButton>\n                <IonToast\n                    isOpen={showToast}\n                    onDidDismiss={() => setshowToast(false)}\n                    message={toastMessage}\n                    duration={2000}\n                    color={toastType}\n                />\n            </IonContent>\n        </IonPage>\n    )\n}\n\nexport default Profile\n"]},"metadata":{},"sourceType":"module"}