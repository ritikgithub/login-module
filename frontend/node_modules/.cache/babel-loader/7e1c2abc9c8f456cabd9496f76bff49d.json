{"ast":null,"code":"import _regeneratorRuntime from\"/home/ritik.agarwal/Desktop/GL/login_module/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ritik.agarwal/Desktop/GL/login_module/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/ritik.agarwal/Desktop/GL/login_module/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonBackButton,IonButton,IonButtons,IonContent,IonHeader,IonIcon,IonInput,IonItem,IonLabel,IonPage,IonTitle,IonToast,IonToolbar}from'@ionic/react';import React,{useRef,useState}from'react';import{Camera,CameraResultType}from'@capacitor/camera';import{cameraOutline as cameraOutlineIcon}from'ionicons/icons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Profile=function Profile(_ref){var user=_ref.user,setuser=_ref.setuser;var _useState=useState(),_useState2=_slicedToArray(_useState,2),imgFile=_useState2[0],setimgFile=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),previewImgUrl=_useState4[0],setpreviewImgUrl=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showToast=_useState6[0],setshowToast=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),toastMessage=_useState8[0],settoastmessage=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),toastType=_useState10[0],settoastType=_useState10[1];var inputref=useRef();function camerahandler(){return _camerahandler.apply(this,arguments);}function _camerahandler(){_camerahandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var photo,res,imgFile;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Camera.getPhoto({resultType:CameraResultType.Uri});case 2:photo=_context.sent;_context.next=5;return fetch(photo.webPath);case 5:res=_context.sent;_context.next=8;return res.blob();case 8:imgFile=_context.sent;setimgFile(imgFile);setpreviewImgUrl(photo.webPath);case 11:case\"end\":return _context.stop();}}},_callee);}));return _camerahandler.apply(this,arguments);}function updateHandler(){var formData=new FormData();if(!inputref.current.value){settoastType(\"danger\");settoastmessage(\"All fields are mandatory\");setshowToast(true);return;}formData.append('imgFile',imgFile);formData.append('name',inputref.current.value);formData.append('userId',user._id);var resStatus=0;fetch(\"http://192.168.43.228:5000/updateProfile\",{method:'POST',body:formData}).then(function(res){resStatus=res.status;return res.json();}).then(function(res){if(resStatus==200){setuser(res.user);setpreviewImgUrl(\"\");settoastType(\"success\");settoastmessage(res.message);setshowToast(true);}else{settoastType(\"danger\");settoastmessage(res.error);setshowToast(true);}});}return/*#__PURE__*/_jsxs(IonPage,{children:[/*#__PURE__*/_jsx(IonHeader,{children:/*#__PURE__*/_jsxs(IonToolbar,{children:[/*#__PURE__*/_jsx(IonButtons,{slot:\"start\",children:/*#__PURE__*/_jsx(IonBackButton,{})}),/*#__PURE__*/_jsx(IonTitle,{children:\"Profile\"})]})}),/*#__PURE__*/_jsxs(IonContent,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-3\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"http://192.168.43.228:5000/\".concat(user.avatar),alt:\"\",style:{height:\"200px\",width:\"200px\",borderRadius:\"50%\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"h4 mt-3 text-primary\",children:user.name})]}),/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"stacked\",children:\"Update Name\"}),/*#__PURE__*/_jsx(IonInput,{ref:inputref,value:user.name})]}),/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"stacked\",children:\"Upload Image\"}),/*#__PURE__*/_jsx(IonIcon,{icon:cameraOutlineIcon,onClick:camerahandler})]}),previewImgUrl?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:\"Preview Image\"}),/*#__PURE__*/_jsx(\"img\",{src:previewImgUrl,style:{height:\"150px\",width:\"150px\",borderRadius:\"50%\"},alt:\"preview\"})]}):\"\",/*#__PURE__*/_jsx(IonButton,{size:\"default\",expand:\"block\",onClick:updateHandler,color:\"primary\",children:\"Update\"}),/*#__PURE__*/_jsx(IonToast,{isOpen:showToast,onDidDismiss:function onDidDismiss(){return setshowToast(false);},message:toastMessage,duration:2000,color:toastType})]})]});};export default Profile;","map":{"version":3,"sources":["/home/ritik.agarwal/Desktop/GL/login_module/frontend/src/pages/Profile.tsx"],"names":["IonBackButton","IonButton","IonButtons","IonContent","IonHeader","IonIcon","IonInput","IonItem","IonLabel","IonPage","IonTitle","IonToast","IonToolbar","React","useRef","useState","Camera","CameraResultType","cameraOutline","cameraOutlineIcon","Profile","user","setuser","imgFile","setimgFile","previewImgUrl","setpreviewImgUrl","showToast","setshowToast","toastMessage","settoastmessage","toastType","settoastType","inputref","camerahandler","getPhoto","resultType","Uri","photo","fetch","webPath","res","blob","updateHandler","formData","FormData","current","value","append","_id","resStatus","method","body","then","status","json","message","error","avatar","height","width","borderRadius","name"],"mappings":"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","sourcesContent":["import { IonBackButton, IonButton, IonButtons, IonContent, IonHeader, IonIcon, IonInput, IonItem, IonLabel, IonPage, IonTitle, IonToast, IonToolbar } from '@ionic/react'\nimport React, { useEffect, useRef, useState } from 'react'\nimport { Camera, CameraResultType } from '@capacitor/camera';\nimport { cameraOutline as cameraOutlineIcon} from 'ionicons/icons';\n\nconst Profile: React.FC<any> = ({ user, setuser }) => {\n    const [imgFile, setimgFile] = useState<Blob>();\n    const [previewImgUrl, setpreviewImgUrl] = useState(\"\");\n    const [showToast, setshowToast] = useState(false);\n    const [toastMessage, settoastmessage] = useState(\"\");\n    const [toastType, settoastType] = useState(\"\");\n    let inputref = useRef<any>();\n\n    async function camerahandler() {\n       let photo = await Camera.getPhoto({\n             resultType: CameraResultType.Uri\n        });\n       let res =  await fetch(photo.webPath);\n       let imgFile = await res.blob();\n      setimgFile(imgFile);\n      setpreviewImgUrl(photo.webPath);\n    }\n\n    function updateHandler() {\n        let formData = new FormData();\n        if(!inputref.current.value) {\n            settoastType(\"danger\");\n            settoastmessage(\"All fields are mandatory\");\n            setshowToast(true);\n            return;\n        }\n        formData.append('imgFile', imgFile);\n        formData.append('name',inputref.current.value);\n        formData.append('userId', user._id);\n        let resStatus = 0;\n        fetch(\"http://192.168.43.228:5000/updateProfile\", {\n            method: 'POST',\n           \n            body: formData\n        }).then(res => { resStatus = res.status; return res.json() })\n            .then(res => {\n                if (resStatus == 200) {\n                    setuser(res.user);\n                    setpreviewImgUrl(\"\");\n                    settoastType(\"success\");\n                    settoastmessage(res.message);\n                    setshowToast(true);\n                }\n                else {\n                    settoastType(\"danger\");\n                    settoastmessage(res.error);\n                    setshowToast(true);\n                }\n            });\n    }\n    return (\n        <IonPage>\n            <IonHeader>\n                <IonToolbar>\n                    <IonButtons slot=\"start\">\n                        <IonBackButton></IonBackButton>\n                    </IonButtons>\n                    <IonTitle>Profile</IonTitle>\n                </IonToolbar>\n            </IonHeader>\n            <IonContent>\n                <div className=\"text-center mt-3\">\n                <img src={`http://192.168.43.228:5000/${user.avatar}`} alt=\"\"  style={{height: \"200px\" , width: \"200px\", borderRadius:\"50%\"}}></img>\n                <div className=\"h4 mt-3 text-primary\">{user.name}</div>\n                </div>\n                \n                <IonItem>\n                    <IonLabel position=\"stacked\">Update Name</IonLabel>\n                    <IonInput ref={inputref} value={user.name}></IonInput>\n                </IonItem>\n                <IonItem>\n                    <IonLabel position=\"stacked\">Upload Image</IonLabel>\n                    <IonIcon icon={cameraOutlineIcon} onClick={camerahandler} />\n                    {/* <IonButton onClick={camerahandler}>Take Picture</IonButton> */}\n                    {/* <input className=\"my-3\" type=\"file\" onChange={(e) => setimgFile(e.target.files[0])} /> */}\n                </IonItem>\n                {previewImgUrl ? <div className=\"text-center\">\n               <div className=\"mt-3\">Preview Image\n               </div>\n               <img src={previewImgUrl} style={{height: \"150px\" , width: \"150px\", borderRadius:\"50%\"}} alt=\"preview\"></img>\n               </div> : \"\"}\n                <IonButton size=\"default\" expand=\"block\" onClick={updateHandler} color=\"primary\">Update</IonButton>\n            \n                \n            \n                <IonToast\n                    isOpen={showToast}\n                    onDidDismiss={() => setshowToast(false)}\n                    message={toastMessage}\n                    duration={2000}\n                    color={toastType}\n                />\n            </IonContent>\n        </IonPage>\n    )\n}\n\nexport default Profile\n"]},"metadata":{},"sourceType":"module"}