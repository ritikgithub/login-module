{"ast":null,"code":"import _regeneratorRuntime from\"/home/ritik.agarwal/Desktop/GL/login_module/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ritik.agarwal/Desktop/GL/login_module/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/ritik.agarwal/Desktop/GL/login_module/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonBackButton,IonButton,IonButtons,IonContent,IonHeader,IonInput,IonItem,IonLabel,IonPage,IonSelect,IonSelectOption,IonTitle,IonToast,IonToolbar}from'@ionic/react';import React,{useRef,useState}from'react';import{Camera,CameraResultType}from'@capacitor/camera';import{useHistory}from'react-router';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditProfile=function EditProfile(_ref){var user=_ref.user,setuser=_ref.setuser;var _useState=useState(),_useState2=_slicedToArray(_useState,2),imgFile=_useState2[0],setimgFile=_useState2[1];var _useState3=useState(\"http://192.168.43.228:5000/\".concat(user.avatar)),_useState4=_slicedToArray(_useState3,2),previewImgUrl=_useState4[0],setpreviewImgUrl=_useState4[1];var _useState5=useState(user.name),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setname=_useState6[1];var _useState7=useState(user.age),_useState8=_slicedToArray(_useState7,2),age=_useState8[0],setage=_useState8[1];var _useState9=useState(user.gender),_useState10=_slicedToArray(_useState9,2),gender=_useState10[0],setgender=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showToast=_useState12[0],setshowToast=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),toastMessage=_useState14[0],settoastmessage=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),toastType=_useState16[0],settoastType=_useState16[1];var history=useHistory();var inputref=useRef();console.log(\"edit rerenders\");function camerahandler(){return _camerahandler.apply(this,arguments);}function _camerahandler(){_camerahandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var photo,res,imgFile;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Camera.getPhoto({resultType:CameraResultType.Uri});case 2:photo=_context.sent;_context.next=5;return fetch(photo.webPath);case 5:res=_context.sent;_context.next=8;return res.blob();case 8:imgFile=_context.sent;setimgFile(imgFile);setpreviewImgUrl(photo.webPath);case 11:case\"end\":return _context.stop();}}},_callee);}));return _camerahandler.apply(this,arguments);}function updateHandler(){var formData=new FormData();if(name==\"\"){settoastType(\"danger\");settoastmessage(\"Name should not be empty!\");setshowToast(true);return;}formData.append('imgFile',imgFile);formData.append('name',name);formData.append('age',age);formData.append('gender',gender);formData.append('userId',user._id);var resStatus=0;fetch(\"http://192.168.43.228:5000/updateProfile\",{method:'POST',body:formData}).then(function(res){resStatus=res.status;return res.json();}).then(function(res){if(resStatus==200){setuser(res.user);settoastType(\"success\");settoastmessage(res.message);setshowToast(true);history.push('/profile');}else{settoastType(\"danger\");settoastmessage(res.error);setshowToast(true);}});}return/*#__PURE__*/_jsxs(IonPage,{children:[/*#__PURE__*/_jsx(IonHeader,{children:/*#__PURE__*/_jsxs(IonToolbar,{children:[/*#__PURE__*/_jsx(IonButtons,{slot:\"start\",children:/*#__PURE__*/_jsx(IonBackButton,{})}),/*#__PURE__*/_jsx(IonTitle,{children:\"Edit Profile\"})]})}),/*#__PURE__*/_jsx(IonContent,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-3\",children:[/*#__PURE__*/_jsx(\"img\",{onClick:camerahandler,src:previewImgUrl,alt:\"\",style:{height:\"200px\",width:\"200px\",borderRadius:\"50%\"}}),/*#__PURE__*/_jsxs(IonItem,{className:\"mt-3\",children:[/*#__PURE__*/_jsx(IonLabel,{position:\"stacked\",children:\"Name\"}),/*#__PURE__*/_jsx(IonInput,{value:name,onIonChange:function onIonChange(e){return setname(e.detail.value);}})]}),/*#__PURE__*/_jsxs(IonItem,{className:\"mt-3\",children:[/*#__PURE__*/_jsx(IonLabel,{position:\"stacked\",children:\"Age\"}),/*#__PURE__*/_jsx(IonInput,{value:age,onIonChange:function onIonChange(e){return setage(e.detail.value);}})]}),/*#__PURE__*/_jsxs(IonItem,{className:\"mt-3\",children:[/*#__PURE__*/_jsx(IonLabel,{position:\"stacked\",children:\"Gender\"}),/*#__PURE__*/_jsxs(IonSelect,{value:gender,placeholder:\"Select One\",onIonChange:function onIonChange(e){return setgender(e.detail.value);},children:[/*#__PURE__*/_jsx(IonSelectOption,{value:\"female\",children:\"Female\"}),/*#__PURE__*/_jsx(IonSelectOption,{value:\"male\",children:\"Male\"})]})]}),/*#__PURE__*/_jsx(IonButton,{size:\"default\",expand:\"block\",onClick:updateHandler,color:\"primary\",children:\"Update\"}),/*#__PURE__*/_jsx(IonToast,{isOpen:showToast,onDidDismiss:function onDidDismiss(){return setshowToast(false);},message:toastMessage,duration:2000,color:toastType})]})})]});};export default EditProfile;","map":{"version":3,"sources":["/home/ritik.agarwal/Desktop/GL/login_module/frontend/src/pages/EditProfile.tsx"],"names":["IonBackButton","IonButton","IonButtons","IonContent","IonHeader","IonInput","IonItem","IonLabel","IonPage","IonSelect","IonSelectOption","IonTitle","IonToast","IonToolbar","React","useRef","useState","Camera","CameraResultType","useHistory","EditProfile","user","setuser","imgFile","setimgFile","avatar","previewImgUrl","setpreviewImgUrl","name","setname","age","setage","gender","setgender","showToast","setshowToast","toastMessage","settoastmessage","toastType","settoastType","history","inputref","console","log","camerahandler","getPhoto","resultType","Uri","photo","fetch","webPath","res","blob","updateHandler","formData","FormData","append","_id","resStatus","method","body","then","status","json","message","push","error","height","width","borderRadius","e","detail","value"],"mappings":"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","sourcesContent":["import { IonBackButton, IonButton, IonButtons, IonContent, IonHeader, IonIcon, IonInput, IonItem, IonLabel, IonPage, IonSelect, IonSelectOption, IonTitle, IonToast, IonToolbar } from '@ionic/react'\nimport React, { useEffect, useRef, useState } from 'react'\nimport { Camera, CameraResultType } from '@capacitor/camera';\nimport { useHistory } from 'react-router';\n\n\nconst EditProfile: React.FC<any> = ({ user, setuser }) => {\n    const [imgFile, setimgFile] = useState<Blob>();\n    const [previewImgUrl, setpreviewImgUrl] = useState(`http://192.168.43.228:5000/${user.avatar}`);\n    const [name, setname] = useState(user.name);\n    const [age, setage] = useState(user.age);\n    const [gender, setgender] = useState(user.gender);\n    const [showToast, setshowToast] = useState(false);\n    const [toastMessage, settoastmessage] = useState(\"\");\n    const [toastType, settoastType] = useState(\"\");\n    let history = useHistory();\n    let inputref = useRef<any>();\n    console.log(\"edit rerenders\");\n    async function camerahandler() {\n        let photo = await Camera.getPhoto({\n            resultType: CameraResultType.Uri\n        });\n        let res = await fetch(photo.webPath);\n        let imgFile = await res.blob();\n        setimgFile(imgFile);\n        setpreviewImgUrl(photo.webPath);\n    }\n\n    function updateHandler() {\n        let formData = new FormData();\n        if (name == \"\") {\n            settoastType(\"danger\");\n            settoastmessage(\"Name should not be empty!\");\n            setshowToast(true);\n            return;\n        }\n        formData.append('imgFile', imgFile);\n        formData.append('name', name);\n        formData.append('age', age);\n        formData.append('gender', gender);\n        formData.append('userId', user._id);\n        let resStatus = 0;\n        fetch(\"http://192.168.43.228:5000/updateProfile\", {\n            method: 'POST',\n\n            body: formData\n        }).then(res => { resStatus = res.status; return res.json() })\n            .then(res => {\n                if (resStatus == 200) {\n                    setuser(res.user);\n                    settoastType(\"success\");\n                    settoastmessage(res.message);\n                    setshowToast(true);\n                    history.push('/profile');\n                }\n                else {\n                    settoastType(\"danger\");\n                    settoastmessage(res.error);\n                    setshowToast(true);\n                }\n            });\n    }\n    return (\n        <IonPage>\n            <IonHeader>\n                <IonToolbar>\n                    <IonButtons slot=\"start\">\n                        <IonBackButton></IonBackButton>\n                    </IonButtons>\n                    <IonTitle>Edit Profile</IonTitle>\n                </IonToolbar>\n            </IonHeader>\n            <IonContent>\n                <div className=\"text-center mt-3\">\n                    <img onClick={camerahandler} src={previewImgUrl} alt=\"\" style={{ height: \"200px\", width: \"200px\", borderRadius: \"50%\" }} />\n                    <IonItem className=\"mt-3\">\n                        <IonLabel position=\"stacked\">Name</IonLabel>\n                        <IonInput value={name} onIonChange={(e) => setname(e.detail.value)}></IonInput>\n                    </IonItem>\n                    <IonItem className=\"mt-3\">\n                        <IonLabel position=\"stacked\">Age</IonLabel>\n                        <IonInput value={age} onIonChange={(e) => setage(e.detail.value)}></IonInput>\n                    </IonItem>\n                    <IonItem className=\"mt-3\">\n                        <IonLabel position=\"stacked\">Gender</IonLabel>\n                        <IonSelect value={gender} placeholder=\"Select One\" onIonChange={e => setgender(e.detail.value)}>\n                            <IonSelectOption value=\"female\">Female</IonSelectOption>\n                            <IonSelectOption value=\"male\">Male</IonSelectOption>\n                        </IonSelect>\n                    </IonItem>\n\n        \n\n\n\n                    <IonButton size=\"default\" expand=\"block\" onClick={updateHandler} color=\"primary\">Update</IonButton>\n\n\n\n                    <IonToast\n                        isOpen={showToast}\n                        onDidDismiss={() => setshowToast(false)}\n                        message={toastMessage}\n                        duration={2000}\n                        color={toastType}\n                    />\n                </div>\n            </IonContent>\n        </IonPage>\n    )\n}\n\nexport default EditProfile\n"]},"metadata":{},"sourceType":"module"}