{"ast":null,"code":"import _slicedToArray from\"/home/ritik.agarwal/Desktop/GL/login_module/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonButton,IonContent,IonHeader,IonInput,IonItem,IonLabel,IonPage,IonTitle,IonToast,IonToolbar}from'@ionic/react';import{useState}from'react';import{useHistory}from'react-router';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(_ref){var setLoggedIn=_ref.setLoggedIn;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setemail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setpassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showToast=_useState6[0],setshowToast=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),toastMessage=_useState8[0],settoastmessage=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),toastType=_useState10[0],settoastType=_useState10[1];var history=useHistory();var LoginHandler=function LoginHandler(){if(email==\"\"||password==\"\"){settoastType(\"danger\");settoastmessage(\"All fields are mandatory\");setshowToast(true);return;}var resStatus=0;fetch(\"http://192.168.43.228:5000/login\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,password:password})}).then(function(res){resStatus=res.status;return res.json();}).then(function(res){if(resStatus==200){settoastType(\"success\");settoastmessage(res.message);setshowToast(true);localStorage.setItem('token',res.token);setLoggedIn(true);}else{settoastType(\"danger\");settoastmessage(res.error);setshowToast(true);}});};return/*#__PURE__*/_jsxs(IonPage,{children:[/*#__PURE__*/_jsx(IonHeader,{children:/*#__PURE__*/_jsx(IonToolbar,{children:/*#__PURE__*/_jsx(IonTitle,{children:\"Login\"})})}),/*#__PURE__*/_jsxs(IonContent,{className:\"ion-padding-top\",children:[/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"stacked\",children:\"Email\"}),/*#__PURE__*/_jsx(IonInput,{value:email,onIonChange:function onIonChange(e){return setemail(e.detail.value);}})]}),/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"stacked\",children:\"Password\"}),/*#__PURE__*/_jsx(IonInput,{type:\"password\",value:password,onIonChange:function onIonChange(e){return setpassword(e.detail.value);}})]}),/*#__PURE__*/_jsx(IonButton,{size:\"default\",expand:\"block\",onClick:LoginHandler,color:\"primary\",children:\"Login\"}),/*#__PURE__*/_jsx(IonButton,{fill:\"clear\",routerLink:\"/register\",children:\"Create a New Account??\"}),/*#__PURE__*/_jsx(IonButton,{fill:\"clear\",routerLink:\"/forgotpassword\",children:\"Forgot Password?\"}),/*#__PURE__*/_jsx(IonToast,{isOpen:showToast,onDidDismiss:function onDidDismiss(){return setshowToast(false);},message:toastMessage,duration:2000,color:toastType})]})]});};export default Login;","map":{"version":3,"sources":["/home/ritik.agarwal/Desktop/GL/login_module/frontend/src/pages/Login.tsx"],"names":["IonButton","IonContent","IonHeader","IonInput","IonItem","IonLabel","IonPage","IonTitle","IonToast","IonToolbar","useState","useHistory","Login","setLoggedIn","email","setemail","password","setpassword","showToast","setshowToast","toastMessage","settoastmessage","toastType","settoastType","history","LoginHandler","resStatus","fetch","method","headers","body","JSON","stringify","then","res","status","json","message","localStorage","setItem","token","error","e","detail","value"],"mappings":"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","sourcesContent":["import { IonButton, IonContent, IonHeader, IonInput, IonItem, IonLabel, IonPage, IonRouterLink, IonTitle, IonToast, IonToolbar } from '@ionic/react';\nimport { useState } from 'react';\nimport { useHistory } from 'react-router';\n\ninterface Login {\n  setLoggedIn : Function\n}\nconst Login: React.FC<Login> = ({setLoggedIn})  => {\n  const [email, setemail] = useState(\"\");\n  const [password, setpassword] = useState(\"\");\n  const [showToast, setshowToast] = useState(false);\n  const [toastMessage, settoastmessage] = useState(\"\");\n  const [toastType, settoastType] = useState(\"\");\n  let history = useHistory();\n\n  const LoginHandler = () => {\n    if (email == \"\" || password == \"\") {\n      settoastType(\"danger\");\n      settoastmessage(\"All fields are mandatory\");\n      setshowToast(true);\n      return;\n    }\n    let resStatus = 0;\n    fetch(\"http://192.168.43.228:5000/login\", {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ email, password })\n    }).then(res => { resStatus = res.status; return res.json() })\n      .then(res => {\n        if (resStatus == 200) {\n          settoastType(\"success\");\n          settoastmessage(res.message);\n          setshowToast(true);\n          localStorage.setItem('token', res.token);\n          setLoggedIn(true);\n        }\n        else {\n          settoastType(\"danger\");\n          settoastmessage(res.error);\n          setshowToast(true);\n        }\n      });\n  }\n\n\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n          <IonTitle>Login</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent className=\"ion-padding-top\">\n        <IonItem>\n          <IonLabel position=\"stacked\">Email</IonLabel>\n          <IonInput value={email} onIonChange={(e) => setemail(e.detail.value)}></IonInput>\n        </IonItem>\n        <IonItem>\n          <IonLabel position=\"stacked\">Password</IonLabel>\n          <IonInput type=\"password\" value={password} onIonChange={(e) => setpassword(e.detail.value)}></IonInput>\n        </IonItem>\n        <IonButton size=\"default\" expand=\"block\" onClick={LoginHandler} color=\"primary\">Login</IonButton>\n        <IonButton fill=\"clear\" routerLink=\"/register\">Create a New Account??</IonButton>\n        <IonButton fill=\"clear\" routerLink=\"/forgotpassword\">Forgot Password?</IonButton>\n        <IonToast\n          isOpen={showToast}\n          onDidDismiss={() => setshowToast(false)}\n          message={toastMessage}\n          duration={2000}\n          color={toastType}\n        />\n      </IonContent>\n\n    </IonPage>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}