{"ast":null,"code":"import _objectSpread from\"/home/ritik.agarwal/Desktop/GL/login_module/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/ritik.agarwal/Desktop/GL/login_module/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Redirect,Route}from'react-router-dom';import{IonApp,IonRouterOutlet}from'@ionic/react';import{IonReactRouter}from'@ionic/react-router';import Login from'./pages/Login';import Home from'./pages/Home';import Register from'./pages/Register';import ForgotPassword from'./pages/ForgotPassword';import{useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),LoggedIn=_useState2[0],setLoggedIn=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setuser=_useState4[1];var resStatus=0;useEffect(function(){fetch(\"http://localhost:5000/isAuthenticated\",{method:'POST',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}}).then(function(res){resStatus=res.status;return res.json();}).then(function(res){if(resStatus==200){setLoggedIn(true);setuser(res.user);}});},[]);return/*#__PURE__*/_jsx(IonApp,{children:/*#__PURE__*/_jsx(IonReactRouter,{children:/*#__PURE__*/_jsxs(IonRouterOutlet,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:LoggedIn?/*#__PURE__*/_jsx(Home,{}):/*#__PURE__*/_jsx(Redirect,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/login\",render:function render(props){return LoggedIn?/*#__PURE__*/_jsx(Redirect,{to:\"/\"}):/*#__PURE__*/_jsx(Login,_objectSpread(_objectSpread({},props),{},{setLoggedIn:setLoggedIn}));}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/register\",children:LoggedIn?/*#__PURE__*/_jsx(Redirect,{to:\"/\"}):/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/forgotpassword\",children:LoggedIn?/*#__PURE__*/_jsx(Redirect,{to:\"/\"}):/*#__PURE__*/_jsx(ForgotPassword,{})})]})})});};export default App;","map":{"version":3,"sources":["/home/ritik.agarwal/Desktop/GL/login_module/frontend/src/App.tsx"],"names":["Redirect","Route","IonApp","IonRouterOutlet","IonReactRouter","Login","Home","Register","ForgotPassword","useEffect","useState","App","LoggedIn","setLoggedIn","user","setuser","resStatus","fetch","method","headers","localStorage","getItem","then","res","status","json","props"],"mappings":"qVAAA,OAASA,QAAT,CAAmBC,KAAnB,KAAgC,kBAAhC,CACA,OAASC,MAAT,CAAiBC,eAAjB,KAAwC,cAAxC,CACA,OAASC,cAAT,KAA+B,qBAA/B,CACA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,cAAjB,CACA,MAAOC,CAAAA,QAAP,KAAqB,kBAArB,CACA,MAAOC,CAAAA,cAAP,KAA2B,wBAA3B,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,C,wFAEA,GAAMC,CAAAA,GAAa,CAAG,QAAhBA,CAAAA,GAAgB,EAAM,CAC1B,cAAgCD,QAAQ,CAAC,KAAD,CAAxC,wCAAOE,QAAP,eAAiBC,WAAjB,eACA,eAAwBH,QAAQ,CAAC,EAAD,CAAhC,yCAAOI,IAAP,eAAaC,OAAb,eACA,GAAIC,CAAAA,SAAS,CAAG,CAAhB,CACAP,SAAS,CAAC,UAAM,CACdQ,KAAK,CAAC,uCAAD,CAA0C,CAC7CC,MAAM,CAAE,MADqC,CAE7CC,OAAO,CAAE,CACP,iCAA2BC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA3B,CADO,CAFoC,CAA1C,CAAL,CAKGC,IALH,CAKQ,SAAAC,GAAG,CAAI,CAAEP,SAAS,CAAGO,GAAG,CAACC,MAAhB,CAAwB,MAAOD,CAAAA,GAAG,CAACE,IAAJ,EAAP,CAAmB,CAL5D,EAMGH,IANH,CAMQ,SAAAC,GAAG,CAAI,CACX,GAAIP,SAAS,EAAI,GAAjB,CAAsB,CACpBH,WAAW,CAAC,IAAD,CAAX,CACAE,OAAO,CAACQ,GAAG,CAACT,IAAL,CAAP,CACD,CACF,CAXH,EAYD,CAbQ,CAaN,EAbM,CAAT,CAcA,mBACE,KAAC,MAAD,wBACE,KAAC,cAAD,wBACE,MAAC,eAAD,yBACE,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,UACGF,QAAQ,cAAG,KAAC,IAAD,IAAH,cAAc,KAAC,QAAD,EAAU,EAAE,CAAC,QAAb,EADzB,EADF,cAIE,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,QAAlB,CAA2B,MAAM,CAAE,gBAACc,KAAD,QAAWd,CAAAA,QAAQ,cAAG,KAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAH,cAAyB,KAAC,KAAD,gCAAWc,KAAX,MAAkB,WAAW,CAAEb,WAA/B,GAA5C,EAAnC,EAJF,cAME,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,WAAlB,UACGD,QAAQ,cAAG,KAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAH,cAAyB,KAAC,QAAD,IADpC,EANF,cASE,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,iBAAlB,UACCA,QAAQ,cAAG,KAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAH,cAAyB,KAAC,cAAD,IADlC,EATF,GADF,EADF,EADF,CAoBD,CAtCD,CAwCA,cAAeD,CAAAA,GAAf","sourcesContent":["import { Redirect, Route } from 'react-router-dom';\nimport { IonApp, IonRouterOutlet } from '@ionic/react';\nimport { IonReactRouter } from '@ionic/react-router';\nimport Login from './pages/Login';\nimport Home from './pages/Home';\nimport Register from './pages/Register';\nimport ForgotPassword from './pages/ForgotPassword';\nimport { useEffect, useState } from 'react';\n\nconst App: React.FC = () => {\n  const [LoggedIn, setLoggedIn] = useState(false);\n  const [user, setuser] = useState({});\n  let resStatus = 0;\n  useEffect(() => {\n    fetch(\"http://localhost:5000/isAuthenticated\", {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\n      }\n    }).then(res => { resStatus = res.status; return res.json() })\n      .then(res => {\n        if (resStatus == 200) {\n          setLoggedIn(true);\n          setuser(res.user);\n        }\n      });\n  }, [])\n  return (\n    <IonApp>\n      <IonReactRouter>\n        <IonRouterOutlet>\n          <Route exact path=\"/\">\n            {LoggedIn ? <Home /> : <Redirect to=\"/login\" />}\n          </Route>\n          <Route exact path=\"/login\" render={(props) => LoggedIn ? <Redirect to=\"/\" /> : <Login {...props} setLoggedIn={setLoggedIn} /> } />\n         \n          <Route exact path=\"/register\">\n            {LoggedIn ? <Redirect to=\"/\" /> : <Register />}\n          </Route>\n          <Route exact path=\"/forgotpassword\">\n          {LoggedIn ? <Redirect to=\"/\" /> : <ForgotPassword />}\n          </Route>\n        </IonRouterOutlet>\n      </IonReactRouter>\n\n    </IonApp>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}